# Get the commit message from the file
commit_msg=$(cat "$1")

# Check if the commit message follows the conventional format
if ! echo "$commit_msg" | npx --no -- commitlint --edit "$1" > /dev/null 2>&1; then
  echo ""
  echo "❌ Invalid commit message format!"
  echo ""
  echo "📝 Your commit message must follow this format:"
  echo "   type: description"
  echo ""
  echo "🔧 Available types: feat, fix, docs, style, refactor, perf, test, chore, ci, build, revert"
  echo ""
  echo "✅ Examples of correct commits:"
  echo "   feat: add user authentication"
  echo "   fix: resolve login button issue"
  echo "   docs: update README with setup guide"
  echo "   style: format code with prettier"
  echo ""
  echo "❌ Your commit message: '$commit_msg'"
  echo ""
  echo "🚀 Quick fix examples:"
  echo "   git commit -m \"feat: add new feature\""
  echo "   git commit -m \"fix: resolve bug\""
  echo "   git commit -m \"docs: update documentation\""
  echo ""
  echo "📖 For more help, see: COMMIT_GUIDE.md"
  echo ""
  exit 1
fi 